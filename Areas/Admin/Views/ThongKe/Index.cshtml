
@{
    ViewBag.Title = "Index";
    var loaiXeThueNN = ViewBag.loaiXeThueNN;
    int thang = DateTime.Now.Month;
    int nam = DateTime.Now.Year;
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Thống kê</title>
</head>
<body>
    <div class="b-content">
        <p style="font-size:1.4rem; font-weight:bolder">
            <span>
                LOẠI XE THUÊ NHIỀU NHẤT
            </span>
        </p>
        <div class="table-bordered">
            <div class="row">
                <div class="col-lg-7">
                    <div style="border:1px solid; border-color:#e9e9e9">
                        <img src=@loaiXeThueNN.HinhAnh style="width:100%" />
                    </div>

                </div>
                <div class="col-lg-5" style="padding:15px; padding-left:15px">
                    <p style="font-weight:bolder; font-size:1.3rem; padding:10px">
                        <span>Loại xe: </span>
                        <span>@loaiXeThueNN.TenLoaiXe</span>
                    </p>
                    <p style="font-weight:bolder; font-size:1.2rem; padding:10px">
                        <span>Số lượt thuê: </span>
                        <span>@loaiXeThueNN.SoLuotThue lượt</span>
                    </p>
                    <p style="font-weight:bolder; font-size:1.2rem; padding:10px">
                        <span>Số lượt thuê tháng này:  </span>
                        <span>305 lượt thuê</span>
                    </p>

                </div>
            </div>


        </div>
        <div class="" style="display:flex">
            <div class="form-group" style="display:flex; padding:10px">
                <label for="" style="padding:10px; font-size:1.5rem">Tháng</label>
                <div style="padding:10px">
                    <select class="form-control" name="" id="thangThongKe" style="margin:0 15px">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                    </select>
                </div>

            </div>
            <div class="form-group" style="display:flex; padding:10px">
                <label for="" style="padding:10px; font-size:1.5rem">Năm</label>
                <div style="padding:10px">
                    <select class="form-control" name="" id="namThongKe" style="margin:0 15px">
                        <option>2021</option>
                        <option>2022</option>
                    </select>
                </div>
            </div>
            <div style="padding:19px">
                <button onclick="getThongKe()" class="btn btn-success">Chọn</button>
            </div>
        </div>
        <div class="">
            <p style="font-weight:bolder; font-size:1.5rem; padding:10px; text-align:center">
                DOANH THU THÁNG <span id="thangHienThi">@thang</span>/<span id="namHienThi">@nam</span>
            </p>
            <div class="content__form">
                <div class="form-group f-group" style="display:flex">
                    <label style="min-width:17%;max-width:18%;padding-top:5px" for="">Tổng số lượt thuê</label>
                    <input type="text" name="" id="countListHoaDon" class="form-control" value=@ViewBag.countListHoaDon aria-describedby="helpId" readonly>
                </div>
                <div class="form-group f-group" style="display:flex">
                    <label style="min-width:17%;max-width:18%;padding-top:5px" for="">Tổng số khách thuê</label>
                    <input type="text" name="" id="" class="form-control" value=@ViewBag.countListKhach aria-describedby="helpId" readonly>

                </div>
                <div class="form-group f-group" style="display:flex">
                    <label style="min-width:17%;max-width:18%;padding-top:5px" for="">Loại xe thuê nhiều nhất</label>
                    <input type="text" name="" id="" class="form-control" value="@loaiXeThueNN.TenLoaiXe" aria-describedby="helpId" readonly>

                </div>
                <div class="form-group f-group" style="display:flex">
                    <label style="min-width:17%;max-width:18%;padding-top:5px" for="">Tổng doanh thu tháng:</label>
                    <input type="text" id="sum" class="form-control" value=@ViewBag.sum aria-describedby="helpId" readonly>

                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    const getThongKe = () => {
        const thang = document.getElementById("thangThongKe").value;
        const nam = document.getElementById("namThongKe").value;

        var url = "/Admin/ThongKe/customThongKe";
        $.get(url, { thang: thang, nam: nam }, function (data) {
            document.getElementById("countListHoaDon").value = data.countListHoaDon;
            document.getElementById("sum").value = data.sum;
        });

        document.getElementById("thangHienThi").innerText = thang;
        document.getElementById("namHienThi").innerText = nam;
    }
</script>